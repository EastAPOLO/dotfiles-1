######
# mod
set $mod Mod4

#######
# font
font pango:Hack 10

#################
# workspace vars
set $ws1 1
set $ws2 2
set $ws3 3
set $ws4 4
set $ws5 5
set $ws6 6
set $ws7 7
set $ws8 8
set $ws9 9
set $ws10 10
set $ws11 11
set $ws12 12
set $ws13 13
set $ws14 14
set $ws15 15
set $ws16 16
set $ws17 17
set $ws18 18
set $ws19 19
set $ws20 20

################
# movement vars
set $up k
set $down j
set $left h
set $right l

############
# misc vars
set $term termite
set_from_resource $fg i3wm.color15 #c4c4c4
set_from_resource $bg i3wm.color0 #202228
set_from_resource $red i3wm.color1 #b00b13
set_from_resource $hlight i3wm.color3 #e64904
set $urgent #c2ff00
set $exec_q exec --no-startup-id
set $lock i3lock -c 000000

##################
# window controls
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right

bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right

bindsym $mod+b split h
bindsym $mod+v split v

bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

bindsym $mod+f fullscreen toggle

bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

bindsym $mod+Shift+space floating toggle
floating_modifier $mod
bindsym $mod+space focus mode_toggle

bindsym $mod+a focus parent
bindsym $mod+Shift+a focus child

bindsym $mod+q kill

mode "resize" {
        bindsym $mod+$left       resize shrink width 10 px or 10 ppt
        bindsym $mod+$down       resize grow height 10 px or 10 ppt
        bindsym $mod+$up         resize shrink height 10 px or 10 ppt
        bindsym $mod+$right      resize grow width 10 px or 10 ppt

        bindsym $mod+Shift+$left       resize shrink width 2 px or 2 ppt
        bindsym $mod+Shift+$down       resize grow height 2 px or 2 ppt
        bindsym $mod+Shift+$up         resize shrink height 2 px or 2 ppt
        bindsym $mod+Shift+$right      resize grow width 2 px or 2 ppt

        bindsym Escape mode "default"
}

bindsym $mod+r mode "resize"

#####################
# workspace controls
workspace_auto_back_and_forth yes

bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws10
bindsym $mod+Control+1 workspace $ws11
bindsym $mod+Control+2 workspace $ws12
bindsym $mod+Control+3 workspace $ws13
bindsym $mod+Control+4 workspace $ws14
bindsym $mod+Control+5 workspace $ws15
bindsym $mod+Control+6 workspace $ws16
bindsym $mod+Control+7 workspace $ws17
bindsym $mod+Control+8 workspace $ws18
bindsym $mod+Control+9 workspace $ws19
bindsym $mod+Control+0 workspace $ws20

bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws10
bindsym $mod+Control+Shift+1 move container to workspace $ws11
bindsym $mod+Control+Shift+2 move container to workspace $ws12
bindsym $mod+Control+Shift+3 move container to workspace $ws13
bindsym $mod+Control+Shift+4 move container to workspace $ws14
bindsym $mod+Control+Shift+5 move container to workspace $ws15
bindsym $mod+Control+Shift+6 move container to workspace $ws16
bindsym $mod+Control+Shift+7 move container to workspace $ws17
bindsym $mod+Control+Shift+8 move container to workspace $ws18
bindsym $mod+Control+Shift+9 move container to workspace $ws19
bindsym $mod+Control+Shift+0 move container to workspace $ws20

##############
# wm controls
bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart

#############
# appearance
#                       border  backgr  text    indicator
client.focused          $red    $red    $fg     $hlight
client.focused_inactive $bg     $bg     $fg     $bg
client.unfocused        $bg     $bg     $fg     $bg
client.urgent           $urgent $urgent $fg     $urgent

new_window pixel 3
focus_follows_mouse no

gaps inner 10
gaps outer 0
smart_gaps on
smart_borders on

###########
# terminal
bindsym $mod+Return exec $term

# "drop-down" style terminal
for_window [class="drop-down"] floating enable, border none, move position 0px 20px, move to scratchpad
$exec_q termite --class drop-down --geometry 1920x400 -c "$HOME/.config/termite/config_t"
bindsym $mod+Shift+Return [class="drop-down"] scratchpad show

###########
# launcher
bindsym $mod+d exec j4-dmenu-desktop
bindsym $mod+Shift+d exec dmenu_run
bindsym Mod1+Tab exec $HOME/bin/i3/rofiwindow.sh



################
# misc keybinds
bindsym $mod+u exec "rofi -dmenu -p '' < ~/.cache/updates"

bindsym $mod+t exec "rofi -dmenu -p '' < ~/todo/todo.txt"
bindsym $mod+Shift+t $exec_q termite --class float_this -e "vim /home/forell/todo/todo.txt /home/forell/todo/done.txt"

bindsym $mod+Shift+P exec passmenu

#######
# lock
bindsym $mod+Control+L exec $lock
bindsym $mod+semicolon exec $HOME/bin/i3/power_menu

############
# media keys
bindsym XF86AudioRaiseVolume $exec_q pactl set-sink-volume @DEFAULT_SINK@ +2%
bindsym XF86AudioLowerVolume $exec_q pactl set-sink-volume @DEFAULT_SINK@ -2%

bindsym XF86MonBrightnessUp $exec_q xbacklight + 8
bindsym XF86MonBrightnessDown $exec_q xbacklight - 8

#######
# cmus
bindsym $mod+p $exec_q cmus-remote -u
bindsym $mod+bracketleft $exec_q cmus-remote -r
bindsym $mod+bracketright $exec_q cmus-remote -n
bindsym $mod+Shift+bracketleft $exec_q cmus-remote -v -5%
bindsym $mod+Shift+bracketright $exec_q cmus-remote -v +5%

mode "cmus" {
    bindsym $mod+R $exec_q cmus-remote -C "toggle repeat_current"
    bindsym $mod+minus $exec_q cmus-remote -v -5%
    bindsym $mod+plus $exec_q cmus-remote -v +5%
    bindsym $mod+equal $exec_q cmus-remote -v +5%
    bindsym Escape mode "default"
}

bindsym $mod+m mode "cmus"

mode "mouse" {
    bindsym $mod+h exec xdotool mousemove_relative -- -20 0
    bindsym $mod+j exec xdotool mousemove_relative 0 20
    bindsym $mod+k exec xdotool mousemove_relative 0 -20
    bindsym $mod+l exec xdotool mousemove_relative 20 0
    bindsym Escape exec unclutter --timeout 1 --jitter 10 &; mode "default"
}

bindsym $mod+Shift+M exec pkill unclutter; mode "mouse"

##################
# keyboard layout
bindsym $mod+KP_Subtract $exec_q xkb-switch -n

#############
# screenshot
bindsym Print $exec_q "maim --format png $HOME/pictures/screenshots/$(date +%F_%H-%M-%S).png"
bindsym Shift+Print $exec_q "maim --format png -b 3 -c 0.69,0.074,0.043 -s $HOME/pictures/screenshots/$(date +%F_%H-%M-%S).png"
bindsym Mod1+Sys_Req $exec_q "maim --format png -i $(xdotool getactivewindow) $HOME/pictures/screenshots/$(date +%F_%H-%M-%S).png"
bindsym Control+Print $exec_q "maim --format png /dev/stdout | xclip -t image/png -selection clipboard"
bindsym Control+Shift+Print $exec_q "maim --format png -b 3 -c 0.69,0.074,0.043 -s /dev/stdout | xclip -t image/png -selection clipboard"

##################
# window specific
for_window [class="Pavucontrol"] floating enable
for_window [class="Org.gnome.Characters"] floating enable
for_window [class="dzen2"] floating enable
for_window [class="Yad"] floating enable
for_window [class="^float_this$"] floating enable

for_window [class="stalonetray"] move position 0px 1060px, resize grow width 25 px, move to scratchpad
bindsym $mod+apostrophe [class="stalonetray"] scratchpad show

for_window [class="Skype"] sticky enable

assign [class="firefox"] $ws2
assign [class="discord"] $ws10
assign [class="Skype"] $ws10
